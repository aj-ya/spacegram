(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7373)}])},2748:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(5893),i=n(8527),s=n(9238),a=n(4651),o=n(7294),c=function(){return(0,r.jsx)(i.xu,{width:"lg",height:"400",className:"jd",children:(0,r.jsx)(i.M5,{height:"100%",children:(0,r.jsx)(s.$,{})})})},u=function(e){var t=e.url,n=e.alt,i=(0,o.useState)(!1);i[0],i[1];return(0,r.jsx)(a.Ee,{src:t,alt:n,height:"400px",width:"lg",transform:"scale(1.0)",transition:"0.3s ease-in-out",_hover:{transform:"scale(1.05)"},_focus:{transform:"scale(1.05)"},fallback:(0,r.jsx)(c,{})})},l=n(5193),h=n(8193),d=function(e){var t=e.postid,n=e.handlePostInteraction,i=e.defl,s=(0,o.useState)(i),a=s[0],c=s[1],u=function(){c(!a)};return(0,o.useEffect)((function(){n(t,a)}),[n,a,t]),a?(0,r.jsx)(l.zx,{onClick:u,rightIcon:(0,r.jsx)(h.M_L,{}),width:"90px",height:"30px",colorScheme:"red",variant:"outline",transition:"0.3s ease-in-out",children:"Unlike"}):(0,r.jsx)(l.zx,{onClick:u,rightIcon:(0,r.jsx)(h.lo,{}),colorScheme:"grey",width:"90px",height:"30px",variant:"outline",transition:"0.3s ease-in-out",children:"Like"})},x=function(e){var t=e.date,n=(0,o.useState)(!1),i=n[0],s=n[1];return(0,o.useEffect)((function(){if(i){setTimeout((function(){s(!1)}),3e3);var e=window.location.origin;navigator.clipboard.writeText("".concat(e,"/date/").concat(t))}}),[i,t]),i?(0,r.jsx)(l.zx,{rightIcon:(0,r.jsx)(h.x2q,{}),width:"90px",height:"30px",colorScheme:"green",variant:"outline",transition:"0.3s ease-in-out",children:"Copied"}):(0,r.jsx)(l.zx,{rightIcon:(0,r.jsx)(h.x2q,{}),width:"90px",height:"30px",colorScheme:"grey",variant:"outline",transition:"0.3s ease-in-out",onClick:function(){s(!0)},children:"Share"})},f=function(e){var t=e.apod,n=e.likes,s=e.handlePostInteraction;return(0,r.jsxs)(i.xu,{borderWidth:"1px",maxW:"lg",borderRadius:"lg",overflow:"hidden",bgColor:"gray.100",children:[(0,r.jsx)(i.M5,{children:(0,r.jsx)(u,{url:t.url,alt:t.title})}),(0,r.jsx)(i.LZ,{height:"6px"}),(0,r.jsxs)(i.xu,{padding:"10px",children:[(0,r.jsx)(i.xv,{fontWeight:600,children:t.title}),(0,r.jsx)(i.xv,{color:"gray.600",height:"xs",overflowY:"scroll",className:"container",textOverflow:"ellipsis",children:t.explanation}),(0,r.jsx)(i.LZ,{height:"5px"}),(0,r.jsxs)(i.Kq,{direction:"row",spacing:"space-between",width:"100%",children:[(0,r.jsx)(i.M5,{children:(0,r.jsx)(i.xv,{color:"gray.500",children:t.date})}),(0,r.jsx)(i.LZ,{}),(0,r.jsxs)(i.Kq,{direction:"row",children:[(0,r.jsx)(x,{date:t.date}),(0,r.jsx)(d,{postid:t.date,handlePostInteraction:s,defl:n.has(t.date)})]})]})]})]})}},7373:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),i=n(7294),s=n(7568),a=n(4051),o=n.n(a),c=n(8527),u=n(9116),l=n(7010),h=n(2748),d=function(e){var t=e.userLikes,n=e.setUserLikes,a=function(e,r){r&&!t.has(e)?t.add(e):t.delete(e),n(t)},d=(0,i.useRef)(),x=(0,i.useRef)(),f=new Date,p=f.toISOString().substring(0,10),g=new Date(f.getTime()-9504e5).toISOString().substring(0,10),j=function(){var e=(0,s.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.current.value,n=x.current.value,console.log(t,n),_(!0),e.next=6,fetch("/api/posts?start_date=".concat(t,"&end_date=").concat(n)).then((function(e){return e.json()})).then((function(e){m(e)}));case 6:_(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=(0,i.useState)([]),v=w[0],m=w[1],k=(0,i.useState)(!0),S=k[0],_=k[1];(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.next=3,fetch("/api/posts?start_date=".concat(g,"&end_date=").concat(p)).then((function(e){return e.json()})).then((function(e){m(e),_(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[p,g]);var I,C=(0,i.useState)("2020-01-01"),y=C[0],b=C[1];return(0,r.jsxs)(c.xu,{width:"100%",children:[(0,r.jsx)(c.M5,{children:(0,r.jsxs)(c.kC,{direction:"row",wrap:"wrap",width:"500px",maxWidth:"500px",alignContent:"center",justifyContent:"center",gap:"15px",children:[(0,r.jsxs)(u.BZ,{width:"240px",children:[(0,r.jsx)(u.Ui,{children:"From",width:"70px"}),(0,r.jsx)(u.II,{ref:d,type:"date",defaultValue:g,min:"1995-07-01",onChange:function(e){b(e.target.value),j()},max:p})]}),(0,r.jsxs)(u.BZ,{width:"240px",children:[(0,r.jsx)(u.Ui,{children:"To",width:"70px"}),(0,r.jsx)(u.II,{ref:x,type:"date",defaultValue:p,min:y,max:p,onChange:j})]})]})}),(0,r.jsx)(c.LZ,{height:"50px"}),(0,r.jsx)(c.kC,{width:"100%",direction:"row",wrap:"wrap",gap:"40px",alignContent:"space-between",justifyContent:"space-around",children:S?(0,r.jsx)(l.Z,{size:8,color:"grey"}):(I=v,I.map((function(e){return(0,r.jsx)(h.Z,{apod:e,likes:t,handlePostInteraction:a},e.date)})))})]})},x=function(){var e=(0,i.useState)(new Set),t=e[0],n=e[1];(0,i.useEffect)((function(){var e=localStorage.getItem("likes")||"[]";n(new Set(JSON.parse(e)))}),[]);return(0,r.jsx)("main",{children:(0,r.jsx)(d,{userLikes:t,setUserLikes:function(e){n(e),localStorage.setItem("likes",JSON.stringify(Array.from(e)))}})})}}},function(e){e.O(0,[617,897,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);